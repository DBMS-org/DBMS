<div class="anfo-edit-container">
  <div class="form-header">
    <h3>Edit ANFO Stock</h3>
    <p>Update details for ANFO inventory item</p>
  </div>

  <form class="anfo-form" [formGroup]="anfoForm" (ngSubmit)="onSubmit()">
    <div class="form-grid">
      <!-- Batch Information -->
      <div class="form-section">
        <h4>Batch Information</h4>
        
        <div class="form-group">
          <label for="batchId">Batch ID *</label>
          <input 
            type="text" 
            id="batchId" 
            formControlName="batchId"
            placeholder="e.g., ANF-2024-001"
            class="form-control"
            [class.error]="anfoForm.get('batchId')?.invalid && anfoForm.get('batchId')?.touched">
          <div class="error-message" *ngIf="anfoForm.get('batchId')?.invalid && anfoForm.get('batchId')?.touched">
            Batch ID is required
          </div>
        </div>

        <div class="form-group">
          <label for="manufacturingDate">Manufacturing Date *</label>
          <input 
            type="date" 
            id="manufacturingDate" 
            formControlName="manufacturingDate"
            class="form-control"
            [class.error]="anfoForm.get('manufacturingDate')?.invalid && anfoForm.get('manufacturingDate')?.touched">
          <div class="error-message" *ngIf="anfoForm.get('manufacturingDate')?.invalid && anfoForm.get('manufacturingDate')?.touched">
            Manufacturing date is required
          </div>
        </div>

        <div class="form-group">
          <label for="expiryDate">Expiry Date *</label>
          <input 
            type="date" 
            id="expiryDate" 
            formControlName="expiryDate"
            class="form-control"
            [class.error]="anfoForm.get('expiryDate')?.invalid && anfoForm.get('expiryDate')?.touched">
          <div class="error-message" *ngIf="anfoForm.get('expiryDate')?.invalid && anfoForm.get('expiryDate')?.touched">
            Expiry date is required
          </div>
        </div>
      </div>

      <!-- Storage Information -->
      <div class="form-section">
        <h4>Storage Information</h4>
        
        <div class="form-group">
          <label for="location">Storage Location *</label>
          <select 
            id="location" 
            formControlName="location"
            class="form-control"
            [class.error]="anfoForm.get('location')?.invalid && anfoForm.get('location')?.touched">
            <option value="">Select Location</option>
            <option value="Store A - Section 1">Store A - Section 1</option>
            <option value="Store A - Section 2">Store A - Section 2</option>
            <option value="Store B - Section 1">Store B - Section 1</option>
            <option value="Store B - Section 2">Store B - Section 2</option>
            <option value="Store C - Section 1">Store C - Section 1</option>
            <option value="Store C - Section 2">Store C - Section 2</option>
          </select>
          <div class="error-message" *ngIf="anfoForm.get('location')?.invalid && anfoForm.get('location')?.touched">
            Storage location is required
          </div>
        </div>

        <div class="form-group">
          <label for="quantity">Quantity (tons) *</label>
          <input 
            type="number" 
            id="quantity" 
            formControlName="quantity"
            placeholder="Enter quantity in tons"
            min="1"
            class="form-control"
            [class.error]="anfoForm.get('quantity')?.invalid && anfoForm.get('quantity')?.touched">
          <div class="error-message" *ngIf="anfoForm.get('quantity')?.invalid && anfoForm.get('quantity')?.touched">
            <span *ngIf="anfoForm.get('quantity')?.errors?.['required']">Quantity is required</span>
            <span *ngIf="anfoForm.get('quantity')?.errors?.['min']">Quantity must be at least 0.001 tons</span>
          </div>
        </div>
      </div>

      <!-- Technical Specifications -->
      <div class="form-section">
        <h4>Technical Specifications</h4>
        
        <div class="form-group">
          <label for="density">Density (g/cm³) *</label>
          <input 
            type="number" 
            id="density" 
            formControlName="density"
            placeholder="e.g., 0.85"
            step="0.01"
            min="0.1"
            max="2.0"
            class="form-control"
            [class.error]="anfoForm.get('density')?.invalid && anfoForm.get('density')?.touched">
          <div class="error-message" *ngIf="anfoForm.get('density')?.invalid && anfoForm.get('density')?.touched">
            <span *ngIf="anfoForm.get('density')?.errors?.['required']">Density is required</span>
            <span *ngIf="anfoForm.get('density')?.errors?.['min'] || anfoForm.get('density')?.errors?.['max']">Density must be between 0.1 and 2.0 g/cm³</span>
          </div>
        </div>

        <div class="form-group">
          <label for="grade">ANFO Grade</label>
          <select 
            id="grade" 
            formControlName="grade"
            class="form-control">
            <option value="">Select Grade</option>
            <option value="Standard">Standard</option>
            <option value="Heavy">Heavy</option>
            <option value="Light">Light</option>
            <option value="Premium">Premium</option>
          </select>
        </div>

        <div class="form-group">
          <label for="notes">Additional Notes</label>
          <textarea 
            id="notes" 
            formControlName="notes"
            placeholder="Enter any additional notes or specifications"
            rows="3"
            class="form-control"></textarea>
        </div>
      </div>

      <!-- Status Information -->
      <div class="form-section">
        <h4>Status Information</h4>
        
        <div class="form-group">
          <label for="status">Status</label>
          <select 
            id="status" 
            formControlName="status"
            class="form-control">
            <option value="Available">Available</option>
            <option value="Reserved">Reserved</option>
            <option value="In Use">In Use</option>
            <option value="Expired">Expired</option>
            <option value="Damaged">Damaged</option>
          </select>
        </div>

        <div class="form-group">
          <label for="lastUpdated">Last Updated</label>
          <input 
            type="text" 
            id="lastUpdated" 
            [value]="getCurrentDateTime()"
            class="form-control"
            readonly>
        </div>
      </div>
    </div>

    <!-- Form Actions -->
    <div class="form-actions">
      <button type="button" class="btn btn-secondary" (click)="onCancel()">
        <i class="material-icons">close</i>
        Cancel
      </button>
      <button type="submit" class="btn btn-primary" [disabled]="anfoForm.invalid || isSubmitting">
        <i class="material-icons">save</i>
        <span *ngIf="!isSubmitting">Update ANFO Stock</span>
        <span *ngIf="isSubmitting">Updating...</span>
      </button>
    </div>
  </form>
</div>