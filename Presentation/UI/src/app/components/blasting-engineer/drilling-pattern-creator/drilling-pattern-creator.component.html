<div class="pattern-creator-container" 
     role="main" 
     aria-label="Drilling Pattern Creator" 
     [class.fullscreen]="(isFullscreen$ | async)">

  <!-- Toolbar Component -->
  <app-pattern-toolbar
    [settings]="(settings$ | async)!"
    [selectedPoint]="(selectedPoint$ | async)"
    [drillPointsCount]="(drillPoints$ | async)?.length || 0"
    [isHolePlacementMode]="(isHolePlacementMode$ | async)!"
    [isPreciseMode]="(isPreciseMode$ | async)!"
    [isSaved]="(isSaved$ | async)!"
    [disabled]="currentState.isReadOnly"
    (settingsChange)="onToolbarSettingsChange($event)"
    (modeToggle)="onToolbarModeToggle($event)"
    (pointAction)="onToolbarPointAction($event)"
    (patternAction)="onToolbarPatternAction($event)">
  </app-pattern-toolbar>

  <!-- Instructions Component -->
  <app-pattern-instructions
    [showInstructions]="currentState.showInstructions">
  </app-pattern-instructions>

  <!-- Canvas Component -->
  <app-pattern-canvas
    [settings]="(settings$ | async)!"
    [drillPoints]="(drillPoints$ | async)!"
    [selectedPoint]="(selectedPoint$ | async)"
    [canvasState]="canvasState"
    [uiState]="uiState"
    (pointPlaced)="onCanvasPointPlaced($event)"
    (pointSelected)="onCanvasPointSelected($event)"
    (pointMoved)="onCanvasPointMoved($event)"
    (canvasStateChange)="onCanvasStateChange($event)">
  </app-pattern-canvas>

  <!-- Status Bar Component -->
  <app-pattern-status-bar
    [settings]="(settings$ | async)!"
    [cursorPosition]="currentState.cursorPosition"
    [scale]="canvasState.scale"
    [isHolePlacementMode]="(isHolePlacementMode$ | async)!"
    [isPreciseMode]="(isPreciseMode$ | async)!"
    [isFullscreen]="(isFullscreen$ | async)!"
    [drillPoints]="(drillPoints$ | async)!"
    [selectedPoint]="(selectedPoint$ | async)"
    [isSaved]="(isSaved$ | async)!">
  </app-pattern-status-bar>

</div>
