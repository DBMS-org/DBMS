/* Modal overlay with backdrop blur and gradient */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.6));
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1050;
  animation: fadeIn 0.3s ease-out;
}

/* Main modal content container */
.modal-content {
  background: var(--bg-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-xl);
  width: 90%;
  max-width: 900px;
  max-height: 90vh;
  overflow-y: auto;
  animation: slideInUp 0.3s ease-out;
}

/**
 * Modal Header Section
 * Gradient header with machine icon, title, and close button
 */
.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-lg);
  border-bottom: 1px solid var(--border-color);
  background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
  color: white;
  border-radius: var(--radius-lg) var(--radius-lg) 0 0;

  .header-content {
    display: flex;
    align-items: center;
    gap: var(--space-md);

    /* Icon container with semi-transparent background */
    .header-icon {
      width: 48px;
      height: 48px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;

      .material-icons {
        font-size: 24px;
        color: white;
      }
    }

    /* Header text content */
    .header-text {
      h2 {
        margin: 0;
        font-size: var(--font-size-xl);
        font-weight: var(--font-weight-bold);
      }

      .header-subtitle {
        margin: 0;
        font-size: var(--font-size-sm);
        opacity: 0.9;
      }
    }
  }

  /* Close button with hover effects */
  .close-btn {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    border-radius: var(--radius-sm);
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition-base);

    &:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.05);
    }

    .material-icons {
      color: white;
      font-size: 20px;
    }
  }
}

/**
 * Form Container
 * Main content area with padding
 */
.machine-details-form {
  padding: var(--space-lg);
}

/**
 * Details Card Component
 * Reusable card component for organizing information sections
 */
.details-card {
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  margin-bottom: var(--space-lg);
  overflow: hidden;
  transition: var(--transition-base);

  /* Subtle hover effect for interactivity */
  &:hover {
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
  }

  /* Card header with gradient background */
  .card-header {
    background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
    padding: var(--space-md);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: space-between;

    .card-header-content {
      display: flex;
      align-items: center;
      gap: var(--space-sm);

      /* Card icon with primary color background */
      .card-icon {
        width: 40px;
        height: 40px;
        background: var(--primary-color);
        border-radius: var(--radius-md);
        display: flex;
        align-items: center;
        justify-content: center;

        .material-icons {
          color: white;
          font-size: 20px;
        }
      }

      /* Card title and subtitle */
      .card-title-section {
        h3 {
          margin: 0;
          font-size: var(--font-size-lg);
          font-weight: var(--font-weight-semibold);
          color: var(--text-primary);
        }

        .card-subtitle {
          margin: 0;
          font-size: var(--font-size-sm);
          color: var(--text-secondary);
        }
      }
    }

    /**
     * Status Indicator Component
     * Color-coded badges for different machine statuses
     */
    .status-indicator {
      display: flex;
      align-items: center;
      gap: var(--space-xs);
      padding: var(--space-xs) var(--space-sm);
      border-radius: var(--radius-full);
      font-size: var(--font-size-sm);
      font-weight: var(--font-weight-medium);

      .material-icons {
        font-size: 16px;
      }

      /* Status-specific color schemes */
      &.status-available {
        background: rgba(var(--success-rgb), 0.1);
        color: var(--success-color);
        border: 1px solid rgba(var(--success-rgb), 0.3);
      }

      &.status-assigned {
        background: rgba(var(--warning-rgb), 0.1);
        color: var(--warning-color);
        border: 1px solid rgba(var(--warning-rgb), 0.3);
      }

      &.status-maintenance {
        background: rgba(var(--info-rgb), 0.1);
        color: var(--info-color);
        border: 1px solid rgba(var(--info-rgb), 0.3);
      }

      &.status-repair {
        background: rgba(var(--error-rgb), 0.1);
        color: var(--error-color);
        border: 1px solid rgba(var(--error-rgb), 0.3);
      }

      &.status-out-of-service {
        background: rgba(var(--text-primary-rgb), 0.1);
        color: var(--text-primary);
        border: 1px solid rgba(var(--text-primary-rgb), 0.3);
      }

      &.status-retired {
        background: rgba(var(--text-muted-rgb), 0.1);
        color: var(--text-muted);
        border: 1px solid rgba(var(--text-muted-rgb), 0.3);
      }

      &.status-unknown {
        background: rgba(var(--text-secondary-rgb), 0.1);
        color: var(--text-secondary);
        border: 1px solid rgba(var(--text-secondary-rgb), 0.3);
      }
    }
  }

  /* Card body content area */
  .card-body {
    padding: var(--space-lg);
  }
}

/**
 * Details Grid Layout
 * Responsive grid for organizing detail items
 */
.details-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: var(--space-md);

  /* Full-width items that span all columns */
  .detail-item.full-width {
    grid-column: 1 / -1;
  }
}

/**
 * Detail Item Component
 * Individual information display units with labels and values
 */
.detail-item {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
  padding: var(--space-sm);
  background: var(--bg-secondary);
  border-radius: var(--radius-md);
  border: 1px solid var(--border-color);
  transition: var(--transition-base);

  /* Interactive hover effects */
  &:hover {
    background: var(--bg-tertiary);
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
  }

  /* Label with icon and text */
  .detail-label {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    font-weight: var(--font-weight-medium);
    color: var(--text-secondary);
    font-size: var(--font-size-sm);

    .material-icons {
      font-size: 18px;
      color: var(--primary-color);
    }
  }

  /* Value display with special formatting options */
  .detail-value {
    font-size: var(--font-size-sm);
    color: var(--text-primary);
    font-weight: var(--font-weight-medium);
    word-break: break-word;

    /* Special styling for chassis/technical details */
    &.chassis-details {
      background: var(--bg-primary);
      padding: var(--space-sm);
      border-radius: var(--radius-sm);
      border: 1px solid var(--border-color);
      font-family: var(--font-mono);
      line-height: 1.5;
      white-space: pre-wrap;
    }
  }
}

/**
 * Actions Section
 * Footer area with action buttons
 */
.details-actions {
  display: flex;
  justify-content: center;
  gap: var(--space-md);
  padding-top: var(--space-md);
  border-top: 1px solid var(--border-color);

  /* Service & Usage button */
  .service-usage-btn {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    padding: var(--space-sm) var(--space-lg);
    border-radius: var(--radius-md);
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    transition: var(--transition-base);
    background: var(--primary-color);
    border: 2px solid var(--primary-color);
    color: white;

    &:hover {
      background: var(--primary-hover);
      border-color: var(--primary-hover);
    }

    .material-icons {
      font-size: 18px;
    }
  }

  /* Close button with ripple effect */
  .close-btn-action {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    padding: var(--space-sm) var(--space-lg);
    border-radius: var(--radius-md);
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    transition: var(--transition-base);
    position: relative;
    overflow: hidden;
    background: var(--bg-secondary);
    border: 2px solid var(--border-color);
    color: var(--text-secondary);

    /* Ripple effect on click */
    &::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.3s, height 0.3s;
    }

    &:active::before {
      width: 300px;
      height: 300px;
    }

    /* Hover effects */
    &:hover {
      background: var(--bg-tertiary);
      border-color: var(--text-secondary);
      color: var(--text-primary);
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .material-icons {
      font-size: 18px;
    }
  }
}

/**
 * Service Tracking Card Styles
 * Progress bars and service status indicators
 */
.service-tracking-card {
  .service-section {
    padding: var(--space-md) 0;
    border-bottom: 1px solid var(--border-color);

    &:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    &:first-child {
      padding-top: 0;
    }
  }

  .service-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-md);

    .service-title {
      display: flex;
      align-items: center;
      gap: var(--space-sm);

      .material-icons {
        color: var(--primary-color);
        font-size: 24px;
      }

      h4 {
        margin: 0;
        font-size: var(--font-size-lg);
        color: var(--text-primary);
        font-weight: var(--font-weight-semibold);
      }
    }

    .service-status-badge {
      padding: 0.4rem 0.75rem;
      border-radius: var(--radius-sm);
      font-size: 0.75rem;
      font-weight: var(--font-weight-bold);
      text-transform: uppercase;
      letter-spacing: 0.5px;

      &.urgency-overdue {
        background: #7f1d1d;
        color: white;
      }

      &.urgency-critical {
        background: #dc2626;
        color: white;
      }

      &.urgency-warning {
        background: #f59e0b;
        color: white;
      }

      &.urgency-caution {
        background: #eab308;
        color: white;
      }

      &.urgency-good {
        background: #10b981;
        color: white;
      }
    }
  }

  .service-details {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
  }

  .service-info-row {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-md);

    .info-item {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
      padding: var(--space-sm);
      background: var(--bg-secondary);
      border-radius: var(--radius-sm);

      .info-label {
        font-size: var(--font-size-xs);
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: var(--font-weight-medium);
      }

      .info-value {
        font-size: var(--font-size-lg);
        color: var(--text-primary);
        font-weight: var(--font-weight-bold);

        &.urgency-overdue {
          color: #7f1d1d;
        }

        &.urgency-critical {
          color: #dc2626;
        }

        &.urgency-warning {
          color: #f59e0b;
        }

        &.urgency-caution {
          color: #eab308;
        }

        &.urgency-good {
          color: #10b981;
        }
      }
    }
  }

  .progress-bar-container {
    display: flex;
    align-items: center;
    gap: var(--space-sm);

    .progress-bar {
      flex: 1;
      height: 24px;
      background: var(--bg-secondary);
      border-radius: var(--radius-md);
      overflow: hidden;
      position: relative;
      border: 1px solid var(--border-color);

      .progress-fill {
        height: 100%;
        transition: width 0.3s ease, background-color 0.3s ease;
        position: relative;
        overflow: hidden;

        &::after {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(
            90deg,
            rgba(255, 255, 255, 0) 0%,
            rgba(255, 255, 255, 0.3) 50%,
            rgba(255, 255, 255, 0) 100%
          );
          animation: shimmer 2s infinite;
        }

        &.urgency-overdue {
          background: linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%);
        }

        &.urgency-critical {
          background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
        }

        &.urgency-warning {
          background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
        }

        &.urgency-caution {
          background: linear-gradient(135deg, #eab308 0%, #facc15 100%);
        }

        &.urgency-good {
          background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
        }
      }
    }

    .progress-label {
      font-size: var(--font-size-sm);
      color: var(--text-secondary);
      font-weight: var(--font-weight-semibold);
      min-width: 40px;
      text-align: right;
    }
  }

  .last-service-info {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    padding: var(--space-sm);
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
    border-left: 3px solid var(--primary-color);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);

    .material-icons {
      font-size: 18px;
      color: var(--primary-color);
    }
  }
}

@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

/**
 * Animation Keyframes
 * Smooth entrance animations for modal
 */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(50px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/**
 * Responsive Design
 * Mobile-friendly adaptations
 */
@media (max-width: 768px) {
  .modal-content {
    width: 95%;
    max-height: 95vh;
  }

  .modal-header {
    padding: var(--space-md);

    .header-content {
      .header-icon {
        width: 40px;
        height: 40px;

        .material-icons {
          font-size: 20px;
        }
      }

      .header-text h2 {
        font-size: var(--font-size-lg);
      }
    }
  }

  .machine-details-form {
    padding: var(--space-md);
  }

  /* Single column layout on mobile */
  .details-grid {
    grid-template-columns: 1fr;
    gap: var(--space-sm);
  }

  .details-actions {
    .close-btn-action {
      width: 100%;
      justify-content: center;
    }
  }

  /* Service tracking mobile adjustments */
  .service-tracking-card {
    .service-header {
      flex-direction: column;
      align-items: flex-start;
      gap: var(--space-sm);

      .service-status-badge {
        align-self: flex-start;
      }
    }

    .service-info-row {
      grid-template-columns: 1fr;
      gap: var(--space-sm);
    }
  }
}
